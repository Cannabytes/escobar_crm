# Документация проекта Escobar Admin

## О проекте

Система администрирования для аудиторской конторы, предоставляющей услуги по:
- Открытию компаний под ключ
- Открытию банковских счетов
- Выделению и продлению лицензий
- Бухгалтерскому обслуживанию

## Технологии

- **PHP**: 8.4
- **Framework**: Laravel 12.35.1
- **БД**: MySQL
- **Хостинг**: Shared-хостинг (весь проект в одной папке)

## Структура системы

### Роли пользователей

1. **Супер-администратор** - владелец сайта, полный доступ
2. **Модератор** - ведет закрепленные за ним компании
3. **Пользователь** - доступ на просмотр/редактирование конкретных компаний

### Основные модули

- **Компании** - управление компаниями клиентов
- **Пользователи** - управление пользователями системы
- **Банковские счета** - реквизиты компаний
- **Учетные данные** - логины/пароли (конфиденциально)
- **Права доступа** - гибкая система доступа к компаниям

## Документация по разделам

- [Управление компаниями](companies/company-management.md)
- [Управление пользователями](users/user-management.md)

## Быстрый старт

### Установка

1. Клонировать репозиторий
2. Установить зависимости: `composer install`
3. Настроить `.env` (база данных)
4. Запустить миграции: `php artisan migrate`
5. Создать символическую ссылку: `php artisan storage:link`

### Первый запуск

1. Создать супер-администратора через миграцию/seeder
2. Войти в систему
3. Создать модераторов
4. Добавить компании

## Структура БД

### Основные таблицы

- `users` - пользователи системы
- `companies` - компании клиентов
- `company_credentials` - учетные данные компаний
- `company_bank_accounts` - банковские счета
- `company_user_access` - права доступа к компаниям

### Связи

```
users (1) --- (N) companies [moderator]
companies (1) --- (1) company_credentials
companies (1) --- (N) company_bank_accounts
users (N) --- (N) companies [через company_user_access]
```

## Безопасность

1. **Конфиденциальные данные**: Логины/пароли видны только модератору и админу
2. **Права доступа**: Проверка на уровне моделей через методы `canUserView()`, `canUserEdit()`
3. **Валидация**: Все данные валидируются через FormRequest классы
4. **Хеширование**: Пароли пользователей хешируются

## Особенности для shared-хостинга

- Весь проект в одной папке
- Public файлы в `/public`
- Загруженные файлы в `/storage/app/public`
- Использование `php artisan storage:link` для доступа к файлам

## API отсутствует

Проект работает как традиционное веб-приложение с серверным рендерингом Blade шаблонов.

## Поддержка

При возникновении вопросов обращайтесь к разработчикам или проверяйте логи в `storage/logs/`.

