# Быстрый старт: Система управления ролями

## Шаг 1: Выполнение миграций

```bash
php artisan migrate
```

## Шаг 2: Заполнение базовых данных

```bash
php artisan db:seed --class=PermissionSeeder
php artisan db:seed --class=RoleSeeder
```

## Шаг 3: Очистка кэша

```bash
php artisan route:clear
php artisan view:clear
php artisan config:clear
```

## Шаг 4: Доступ к системе

1. Войдите в систему как **супер-администратор**
2. Перейдите в раздел **Система → Роли и права**
3. Вы увидите предустановленные роли:
   - Супер Администратор (полные права)
   - Администратор (все кроме ролей и логов)
   - Модератор компаний (управление компаниями)
   - Наблюдатель (только просмотр)
   - Менеджер пользователей (управление пользователями)

## Шаг 5: Создание первой пользовательской роли

1. Нажмите **"Создать роль"**
2. Заполните:
   - **Название**: "Менеджер отдела продаж"
   - **Slug**: Автоматически сгенерируется
   - **Описание**: "Управление компаниями и просмотр статистики"
3. Выберите разрешения:
   - ✅ Компании → Просмотр списка компаний
   - ✅ Компании → Просмотр карточки компании
   - ✅ Компании → Редактирование компании
   - ✅ Банковские счета → Просмотр банковских счетов
4. Нажмите **"Создать роль"**

## Шаг 6: Назначение роли пользователю

1. Перейдите в **Пользователи → Создать пользователя**
2. Заполните данные пользователя
3. В поле **"Роль в системе (RBAC)"** выберите созданную роль
4. Нажмите **"Создать пользователя"**

## Готово!

Теперь пользователь сможет видеть только те разделы, на которые у него есть права.

---

## Полезные команды

### Просмотр всех ролей
```bash
php artisan tinker
>>> App\Models\Role::with('permissions')->get();
```

### Просмотр прав пользователя
```bash
php artisan tinker
>>> $user = App\Models\User::find(1);
>>> $user->getAllPermissions()->pluck('slug');
```

### Проверка конкретного права
```bash
php artisan tinker
>>> $user = App\Models\User::find(1);
>>> $user->hasPermission('companies.create');
```

---

## Дополнительная информация

Полная документация: [doc/roles.md](../roles.md)

